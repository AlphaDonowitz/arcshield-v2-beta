<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Arc Shield - Infrastructure Hub</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/style.css">
    
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ethers/6.7.0/ethers.umd.min.js"></script>
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
</head>
<body>

    <div id="landingPage">
        <div class="landing-content">
            <div class="badge"><span class="dot"></span> Arc Testnet Live</div>
            <h1 class="main-title"><span class="gradient-text">Arc</span> <span class="shield-gradient">Shield</span></h1>
            <p class="hero-desc">SuÃ­te DeFi completa: Launchpad, Bridge CCTP, Multisender e Vesting.</p>
            <button class="btn-hero" onclick="enterApp()">
                <span>Iniciar Dashboard</span> <span>â†’</span>
            </button>
        </div>
        <div class="orb orb-1"></div>
        <div class="orb orb-2"></div>
    </div>

    <div id="dashboardLayout" style="display: none;">
        
        <aside class="sidebar">
            <div class="brand">
                <span class="gradient-text">Arc</span> <span class="shield-gradient">Shield</span>
            </div>
            <nav class="nav-menu">
                <button class="nav-item active" onclick="navigate('creator', this)">ğŸš€ Launchpad</button>
                <button class="nav-item" onclick="navigate('bridge', this)">ğŸŒ‰ Bridge CCTP</button>
                <button class="nav-item" onclick="navigate('multisender', this)">ğŸ“¨ Multisender</button>
                <button class="nav-item" onclick="navigate('locker', this)">ğŸ”’ Locker</button>
                <button class="nav-item" onclick="navigate('vesting', this)">â³ Vesting</button>
                <button class="nav-item" onclick="navigate('leaderboard', this)">ğŸ† Ranking</button>
            </nav>
            <div class="sidebar-footer">
                <p>v3.0 Stable â€¢ <a href="#" onclick="disconnectWallet()" style="color:#ff6b6b;">Sair</a></p>
            </div>
        </aside>

        <main class="main-content">
            <header class="top-bar">
                <h2 id="pageTitle">Launchpad</h2>
                <div class="wallet-area">
                    <button id="btnConnect" class="btn-connect" onclick="connectWallet()">ğŸ”Œ Conectar Carteira</button>
                </div>
            </header>

            <div class="content-wrapper">
                
                <div id="creator" class="page-section active">
                    <div class="glass-panel">
                        <h3>Criar Novo Token</h3>
                        <div class="form-grid">
                            <div><label>Nome do Projeto</label><input type="text" id="tokenName" placeholder="Ex: Arc Gold"></div>
                            <div><label>SÃ­mbolo (Ticker)</label><input type="text" id="tokenSymbol" placeholder="Ex: GOLD"></div>
                        </div>
                        <label>Supply Inicial</label><input type="number" id="tokenSupply" placeholder="Ex: 1000000">
                        
                        <div class="upload-area">
                            <label>Logo do Token</label>
                            <div class="file-input-wrapper">
                                <button class="mini-btn" onclick="document.getElementById('tokenLogoFile').click()">ğŸ“‚ Escolher Arquivo</button>
                                <span id="logoFileName" style="margin-left:10px; font-size:0.8rem; color:#888;">Nenhum selecionado</span>
                                <input type="file" id="tokenLogoFile" hidden onchange="handleLogoUpload(this)">
                            </div>
                        </div>
                        <label style="margin-top:15px;">DescriÃ§Ã£o (Opcional)</label>
                        <textarea id="tokenDesc" placeholder="DescriÃ§Ã£o para o card social..."></textarea>
                        <button id="btnCreate" class="btn-primary" onclick="createToken()">ğŸš€ LanÃ§ar Token (+100 XP)</button>
                    </div>
                </div>

                <div id="bridge" class="page-section">
                    <div class="glass-panel">
                        <h3>USDC Cross-Chain (Circle CCTP)</h3>
                        <div class="nav-tabs" style="justify-content:center; margin-bottom:20px;">
                            <button class="tab-btn active" id="btnModeDeposit" onclick="setBridgeMode('deposit')">ğŸ“¤ 1. Enviar (Sepolia)</button>
                            <button class="tab-btn" id="btnModeClaim" onclick="setBridgeMode('claim')">ğŸ“¥ 2. Receber (Arc)</button>
                        </div>

                        <div id="bridgeDepositArea">
                            <div class="info-box">âš ï¸ VocÃª deve estar conectado na <b>Ethereum Sepolia</b>.</div>
                            <label>Quantidade USDC</label>
                            <input type="number" id="bridgeAmount" placeholder="Ex: 10.00">
                            <label>Destino (Sua carteira na Arc)</label>
                            <input type="text" id="bridgeRecipient" readonly style="opacity:0.6; cursor:not-allowed;">
                            
                            <div class="action-row">
                                <button id="btnApproveCCTP" class="btn-secondary" onclick="approveUSDC()">1. Aprovar</button>
                                <button id="btnBurnCCTP" class="btn-primary" onclick="burnUSDC()" disabled>2. Queimar & Enviar</button>
                            </div>
                        </div>

                        <div id="bridgeClaimArea" style="display:none;">
                            <div class="info-box">â„¹ï¸ Pegue a assinatura na <a href="https://developers.circle.com/stablecoins/docs/cctp-testnet-faucet" target="_blank" style="color:#4dcfff;">Circle Tool</a> apÃ³s ~15min.</div>
                            <label>Mensagem (Message Bytes)</label>
                            <textarea id="cctpMessageBytes" placeholder="0x..." style="height:80px;"></textarea>
                            <label>Assinatura (Attestation)</label>
                            <textarea id="cctpAttestation" placeholder="0x..." style="height:80px;"></textarea>
                            <button id="btnClaimCCTP" class="btn-primary" onclick="mintUSDC()">ğŸš€ Receber na Arc</button>
                        </div>
                    </div>
                </div>

                <div id="multisender" class="page-section">
                    <div class="glass-panel">
                        <h3>Envio em Massa</h3>
                        <label>EndereÃ§o do Token</label><input type="text" id="multiTokenAddr" placeholder="0x...">
                        <div class="flex-between" style="display:flex; justify-content:space-between; margin-bottom:5px;">
                            <label>Lista (CSV)</label>
                            <button class="mini-btn" onclick="document.getElementById('csvFile').click()">ğŸ“‚ Upload</button>
                            <input type="file" id="csvFile" hidden onchange="handleFileUpload(this)">
                        </div>
                        <textarea id="csvInput" class="code-area" placeholder="0xWallet1, 100&#10;0xWallet2, 500" style="font-family:monospace; height:120px;"></textarea>
                        <p id="multiSummary" class="hint-text">0 endereÃ§os detectados</p>
                        <div class="action-row">
                            <button class="btn-secondary" onclick="approveToken('multi')">Aprovar</button>
                            <button id="btnMulti" class="btn-primary" onclick="sendBatch()">Enviar</button>
                        </div>
                    </div>
                </div>

                <div id="locker" class="page-section">
                    <div class="glass-panel">
                        <h3>Trancar Liquidez</h3>
                        <label>Token Address</label><input type="text" id="lockTokenAddr">
                        <div class="form-grid">
                            <div><label>Quantidade</label><input type="number" id="lockAmount"></div>
                            <div><label>Data</label><input type="datetime-local" id="lockDate" style="color-scheme:dark;"></div>
                        </div>
                        <div class="action-row">
                            <button class="btn-secondary" onclick="approveToken('lock')">Aprovar</button>
                            <button id="btnLock" class="btn-primary" onclick="lockTokens()">Trancar</button>
                        </div>
                    </div>
                </div>

                <div id="vesting" class="page-section">
                    <div class="glass-panel">
                        <h3>Criar Vesting</h3>
                        <label>Token Address</label><input type="text" id="vestTokenAddr">
                        <label>BeneficiÃ¡rio</label><input type="text" id="vestBeneficiary">
                        <div class="form-grid">
                            <div><label>Total</label><input type="number" id="vestAmount"></div>
                            <div><label>Minutos</label><input type="number" id="vestDuration"></div>
                        </div>
                        <div class="action-row">
                            <button class="btn-secondary" onclick="approveToken('vest')">Aprovar</button>
                            <button id="btnVest" class="btn-primary" onclick="createVesting()">Criar</button>
                        </div>
                    </div>
                    <div class="glass-panel" style="margin-top:20px;">
                        <h3>Meus Saques</h3>
                        <div id="dashboardContent" style="min-height:50px;">Carregando...</div>
                        <button class="mini-btn" style="width:100%; margin-top:10px;" onclick="loadDashboardData()">ğŸ”„ Atualizar</button>
                    </div>
                </div>

                <div id="leaderboard" class="page-section">
                    <div class="glass-panel">
                        <h3>Perfil</h3>
                        <div class="form-grid">
                            <input type="text" id="profileName" placeholder="Nickname">
                            <input type="text" id="profileAvatar" placeholder="URL Avatar">
                        </div>
                        <button class="btn-primary" onclick="saveProfile()">Salvar</button>
                    </div>
                    <div class="glass-panel" style="margin-top:20px;">
                        <h3>Top Users</h3>
                        <div id="leaderboardList"></div>
                        <button class="mini-btn" style="width:100%; margin-top:10px;" onclick="loadLeaderboard()">ğŸ”„ Atualizar</button>
                    </div>
                </div>

            </div>
        </main>
    </div>

    <div id="tutorialOverlay" class="modal-overlay" style="display: none;">
        <div class="tutorial-card">
            <div id="tutStep1" class="tut-step active">
                <h2>ğŸ‘‹ Bem-vindo</h2>
                <p>Plataforma tudo-em-um para a Arc Network. Vamos configurar tudo.</p>
                <div class="tut-img">ğŸ›¡ï¸</div>
                <button class="btn-primary" onclick="nextTutorial(2)">PrÃ³ximo</button>
            </div>
            <div id="tutStep2" class="tut-step">
                <h2>ğŸš€ Launchpad & Bridge</h2>
                <p>Crie tokens e traga liquidez USDC da Sepolia via CCTP.</p>
                <div class="tut-img">ğŸŒ‰</div>
                <button class="btn-primary" onclick="nextTutorial(3)">Legal</button>
            </div>
            <div id="tutStep3" class="tut-step">
                <h2>ğŸ† Ganhe XP</h2>
                <p>Interaja com os contratos e suba no ranking da Testnet.</p>
                <div class="tut-img">ğŸ“Š</div>
                <button class="btn-primary" onclick="finishTutorial()">ComeÃ§ar!</button>
            </div>
            <button class="skip-btn" onclick="finishTutorial()">Pular Tutorial</button>
        </div>
    </div>

    <div id="socialCardTemplate" class="social-card-layout">
        <div class="card-header"><span class="badge">ARC TESTNET</span><span class="card-brand">ğŸ›¡ï¸ Arc Shield</span></div>
        <div class="card-body">
            <img id="cardTokenLogo" src="" class="card-logo-img">
            <h1 id="cardTokenSymbol">$TOKEN</h1>
            <p id="cardTokenName">Token Name</p>
        </div>
        <div class="card-footer"><div class="stat-box"><span>Status</span><b>Deployed ğŸš€</b></div><div class="stat-box"><span>Supply</span><b id="cardTokenSupply">1M</b></div></div>
    </div>

    <div id="successModal" class="modal-overlay">
        <div class="glass-panel success-panel">
            <span class="success-icon">ğŸ‰</span>
            <h2 id="modalTitle">Sucesso!</h2>
            <p id="modalMsg">TransaÃ§Ã£o confirmada.</p>
            <div id="tokenCreatedInfo" style="display:none; background:rgba(0,0,0,0.3); padding:10px; border-radius:8px; margin:10px 0;">
                <code id="newContractAddr" style="color:#00ff9d; word-break:break-all;">0x...</code>
                <button onclick="copyContractAddr()" class="mini-btn">Copiar</button>
            </div>
            <div id="generatedCardContainer" style="display:none; justify-content:center; margin:15px 0;"></div>
            
            <div class="action-row">
                <button id="simpleShareBtn" class="btn-secondary" style="display:none;">Twitter</button>
                <a id="downloadCardBtn" href="#" class="btn-secondary" style="display:none; text-align:center; text-decoration:none;">Baixar</a>
            </div>
            <a id="explorerBtn" href="#" target="_blank" class="link-btn">Ver no ArcScan</a>
            <button class="btn-primary" onclick="document.getElementById('successModal').style.display='none'">Fechar</button>
        </div>
    </div>
    
    <div id="consoleArea" style="display:none;"></div>

    <script src="js/app.js"></script>
</body>
</html>
