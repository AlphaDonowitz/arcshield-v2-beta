<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Arc Shield - Infrastructure Hub</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/style.css">
    
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ethers/6.7.0/ethers.umd.min.js"></script>
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
</head>
<body>

    <div id="landingPage">
        <div class="landing-content">
            <div class="badge"><span class="dot"></span> Arc Testnet Live</div>
            <h1 class="main-title"><span class="gradient-text">Arc</span> <span class="shield-gradient">Shield</span></h1>
            <p class="hero-desc">A Su√≠te DeFi completa para lan√ßar, distribuir e gerenciar ativos na Arc Network.</p>
            <button class="btn-hero" onclick="enterApp()">
                <span>Iniciar App</span> <span>‚Üí</span>
            </button>
        </div>
        <div class="orb orb-1"></div>
        <div class="orb orb-2"></div>
    </div>

    <div id="dashboardLayout" style="display: none;">
        
        <aside class="sidebar">
            <div class="brand">
                <span class="gradient-text">Arc</span> <span class="shield-gradient">Shield</span>
            </div>
            <nav class="nav-menu">
                <button class="nav-item active" onclick="navigate('creator', this)">üöÄ Launchpad</button>
                <button class="nav-item" onclick="navigate('multisender', this)">üì® Multisender</button>
                <button class="nav-item" onclick="navigate('locker', this)">üîí Locker</button>
                <button class="nav-item" onclick="navigate('vesting', this)">‚è≥ Vesting</button>
                <button class="nav-item" onclick="navigate('leaderboard', this)">üèÜ Ranking</button>
            </nav>
            <div class="sidebar-footer">
                <p>v3.0 Beta</p>
            </div>
        </aside>

        <main class="main-content">
            <header class="top-bar">
                <h2 id="pageTitle">Launchpad</h2>
                <div class="wallet-area">
                    <button id="btnConnect" class="btn-connect" onclick="connectWallet()">üîå Conectar</button>
                </div>
            </header>

            <div class="content-wrapper">
                
                <div id="creator" class="page-section active">
                    <div class="glass-panel">
                        <h3>Criar Novo Token</h3>
                        <div class="form-grid">
                            <div>
                                <label>Nome do Projeto</label>
                                <input type="text" id="tokenName" placeholder="Ex: Arc Gold">
                            </div>
                            <div>
                                <label>S√≠mbolo (Ticker)</label>
                                <input type="text" id="tokenSymbol" placeholder="Ex: GOLD">
                            </div>
                        </div>
                        <label>Supply Inicial</label>
                        <input type="number" id="tokenSupply" placeholder="Ex: 1000000">
                        
                        <div class="upload-area">
                            <label>Logo do Token</label>
                            <div class="file-input-wrapper">
                                <button class="mini-btn" onclick="document.getElementById('tokenLogoFile').click()">üìÇ Escolher Arquivo</button>
                                <span id="logoFileName">Nenhum selecionado</span>
                                <input type="file" id="tokenLogoFile" hidden onchange="handleLogoUpload(this)">
                            </div>
                        </div>

                        <label>Descri√ß√£o (Opcional)</label>
                        <textarea id="tokenDesc" placeholder="Descri√ß√£o para o card social..."></textarea>

                        <button id="btnCreate" class="btn-primary" onclick="createToken()">üöÄ Lan√ßar Token (+100 XP)</button>
                    </div>
                </div>

                <div id="multisender" class="page-section">
                    <div class="glass-panel">
                        <h3>Envio em Massa (Airdrop)</h3>
                        <label>Endere√ßo do Token</label>
                        <input type="text" id="multiTokenAddr" placeholder="0x...">
                        
                        <div class="flex-between">
                            <label>Lista de Destinat√°rios (CSV)</label>
                            <button class="mini-btn" onclick="document.getElementById('csvFile').click()">üìÇ Upload CSV</button>
                            <input type="file" id="csvFile" hidden onchange="handleFileUpload(this)">
                        </div>
                        <textarea id="csvInput" class="code-area" placeholder="0xWallet1, 100&#10;0xWallet2, 500"></textarea>
                        <p id="multiSummary" class="hint-text">0 endere√ßos detectados</p>

                        <div class="action-row">
                            <button class="btn-secondary" onclick="approveToken('multi')">1. Aprovar</button>
                            <button id="btnMulti" class="btn-primary" onclick="sendBatch()">2. Enviar</button>
                        </div>
                    </div>
                </div>

                <div id="locker" class="page-section">
                    <div class="glass-panel">
                        <h3>Trancar Liquidez/Tokens</h3>
                        <label>Token Address</label>
                        <input type="text" id="lockTokenAddr">
                        
                        <div class="form-grid">
                            <div>
                                <label>Quantidade</label>
                                <input type="number" id="lockAmount">
                            </div>
                            <div>
                                <label>Data de Desbloqueio</label>
                                <input type="datetime-local" id="lockDate">
                            </div>
                        </div>

                        <div class="action-row">
                            <button class="btn-secondary" onclick="approveToken('lock')">1. Aprovar</button>
                            <button id="btnLock" class="btn-primary" onclick="lockTokens()">2. Trancar</button>
                        </div>
                    </div>
                </div>

                <div id="vesting" class="page-section">
                    <div class="glass-panel">
                        <h3>Criar Vesting Linear</h3>
                        <label>Token Address</label>
                        <input type="text" id="vestTokenAddr">
                        <label>Benefici√°rio (Wallet)</label>
                        <input type="text" id="vestBeneficiary">

                        <div class="form-grid">
                            <div>
                                <label>Total de Tokens</label>
                                <input type="number" id="vestAmount">
                            </div>
                            <div>
                                <label>Dura√ß√£o (Minutos)</label>
                                <input type="number" id="vestDuration">
                            </div>
                        </div>

                        <div class="action-row">
                            <button class="btn-secondary" onclick="approveToken('vest')">1. Aprovar</button>
                            <button id="btnVest" class="btn-primary" onclick="createVesting()">2. Criar Contrato</button>
                        </div>
                    </div>
                    
                    <div class="glass-panel" style="margin-top: 20px;">
                        <h3>Meus Vestings a Receber</h3>
                        <div id="dashboardContent">Carregando...</div>
                        <button class="mini-btn full-width" onclick="loadDashboardData()">üîÑ Atualizar Lista</button>
                    </div>
                </div>

                <div id="leaderboard" class="page-section">
                    <div class="glass-panel">
                        <h3>Meu Perfil</h3>
                        <div class="form-grid">
                            <input type="text" id="profileName" placeholder="Seu Nickname">
                            <input type="text" id="profileAvatar" placeholder="URL do Avatar">
                        </div>
                        <button class="btn-primary" onclick="saveProfile()">Salvar Perfil</button>
                    </div>

                    <div class="glass-panel" style="margin-top: 20px;">
                        <h3>Top Usu√°rios</h3>
                        <div id="leaderboardList">
                            </div>
                        <button class="mini-btn full-width" onclick="loadLeaderboard()">üîÑ Atualizar Rank</button>
                    </div>
                </div>

            </div>
        </main>
    </div>

    <div id="tutorialOverlay" class="modal-overlay" style="display: none;">
        <div class="tutorial-card">
            <div id="tutStep1" class="tut-step active">
                <h2>üëã Bem-vindo ao Arc Shield</h2>
                <p>Sua plataforma tudo-em-um para a Arc Network. Vamos configurar tudo em segundos.</p>
                <div class="tut-img">üõ°Ô∏è</div>
                <button class="btn-primary" onclick="nextTutorial(2)">Pr√≥ximo</button>
            </div>
            <div id="tutStep2" class="tut-step">
                <h2>üöÄ Launchpad</h2>
                <p>Crie tokens ERC-20 completos com logotipo e supply personalizado. Sem c√≥digo.</p>
                <div class="tut-img">ü™ô</div>
                <button class="btn-primary" onclick="nextTutorial(3)">Legal</button>
            </div>
            <div id="tutStep3" class="tut-step">
                <h2>üèÜ Gamifica√ß√£o</h2>
                <p>Cada a√ß√£o (criar, enviar, trancar) gera XP. Suba no ranking e prove seu valor na Testnet.</p>
                <div class="tut-img">üìä</div>
                <button class="btn-primary" onclick="finishTutorial()">Come√ßar a Usar!</button>
            </div>
            <button class="skip-btn" onclick="finishTutorial()">Pular Tutorial</button>
        </div>
    </div>

    <div id="socialCardTemplate" class="social-card-layout">
        <div class="card-header"><span class="badge">ARC TESTNET</span><span class="card-brand">üõ°Ô∏è Arc Shield</span></div>
        <div class="card-body">
            <img id="cardTokenLogo" src="" class="card-logo-img">
            <h1 id="cardTokenSymbol">$TOKEN</h1>
            <p id="cardTokenName">Token Name</p>
        </div>
        <div class="card-footer">
            <div class="stat-box"><span>Status</span><b>Deployed üöÄ</b></div>
            <div class="stat-box"><span>Supply</span><b id="cardTokenSupply">1M</b></div>
        </div>
    </div>

    <div id="successModal" class="modal-overlay">
        <div class="glass-panel success-panel">
            <span class="success-icon">üéâ</span>
            <h2 id="modalTitle">Sucesso!</h2>
            <p id="modalMsg">Opera√ß√£o realizada.</p>
            
            <div id="tokenCreatedInfo" style="display:none; background:rgba(0,0,0,0.3); padding:10px; border-radius:8px; margin:10px 0;">
                <code id="newContractAddr" style="color:#00ff9d;">0x...</code>
                <button onclick="copyContractAddr()" class="mini-btn">Copiar</button>
            </div>

            <div id="generatedCardContainer" style="display:none; justify-content:center; margin:15px 0;"></div>
            
            <div class="action-row">
                <button id="simpleShareBtn" class="btn-secondary" style="display:none;">Twitter</button>
                <a id="downloadCardBtn" href="#" class="btn-secondary" style="display:none; text-align:center; text-decoration:none;">Baixar</a>
            </div>
            
            <a id="explorerBtn" href="#" target="_blank" class="link-btn">Ver no Explorer</a>
            <button class="btn-primary" onclick="document.getElementById('successModal').style.display='none'">Fechar</button>
        </div>
    </div>

    <script src="js/app.js"></script>
</body>
</html>
