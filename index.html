<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Arc Shield - Infrastructure Hub</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/style.css?v=6.0">
    
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ethers/6.7.0/ethers.umd.min.js"></script>
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>

    <div id="landingPage">
        <div class="landing-content">
            <div class="brand-pill">üõ°Ô∏è ARC TESTNET</div>
            <h1 class="hero-title">Arc <span class="text-blue">Shield</span></h1>
            <p class="hero-subtitle">Infraestrutura DeFi de n√≠vel institucional.</p>
            <button class="btn-primary-lg" onclick="enterApp()">Acessar Dashboard</button>
        </div>
    </div>

    <div id="dashboardLayout" style="display: none;">
        
        <aside class="sidebar">
            <div class="brand-area">
                <span class="brand-icon">üõ°Ô∏è</span> Arc Shield
            </div>
            
            <div class="nav-group">
                <label>PROTOCOLOS</label>
                <button class="nav-item active" onclick="navigate('creator', this)">Launchpad</button>
                <button class="nav-item" onclick="navigate('bridge', this)">CCTP Bridge</button>
                <button class="nav-item" onclick="navigate('multisender', this)">Multisender</button>
                <button class="nav-item" onclick="navigate('locker', this)">Liquidity Locker</button>
                <button class="nav-item" onclick="navigate('vesting', this)">Vesting</button>
            </div>

            <div class="nav-group">
                <label>SOCIAL</label>
                <button class="nav-item" onclick="navigate('leaderboard', this)">User Hub</button>
            </div>

            <div class="sidebar-footer">
                <div class="status-dot"></div> v6.0 Stable
                <a href="#" onclick="disconnectWallet()" class="logout-link">Sair</a>
            </div>
        </aside>

        <main class="main-content">
            
            <header class="app-header">
                <h2 id="pageTitle">Vis√£o Geral</h2>
                <button id="btnConnect" class="btn-connect" onclick="connectWallet()">Conectar Carteira</button>
            </header>

            <div class="content-container">

                <div id="creator" class="page-section active">
                    <div class="card">
                        <div class="card-header">
                            <h3>Deploy Token</h3>
                            <p>Crie ativos padr√£o ERC-20 na Arc Network.</p>
                        </div>
                        <div class="form-row">
                            <div class="input-group">
                                <label>Nome do Projeto</label>
                                <input type="text" id="tokenName" placeholder="Ex: USD Coin">
                            </div>
                            <div class="input-group">
                                <label>S√≠mbolo</label>
                                <input type="text" id="tokenSymbol" placeholder="Ex: USDC">
                            </div>
                        </div>
                        <div class="input-group">
                            <label>Supply Inicial</label>
                            <input type="number" id="tokenSupply" placeholder="1000000">
                        </div>
                        <div class="input-group">
                            <label>Logo (Opcional)</label>
                            <div class="file-upload">
                                <button onclick="document.getElementById('tokenLogoFile').click()">Carregar Imagem</button>
                                <input type="file" id="tokenLogoFile" hidden onchange="handleLogoUpload(this)">
                                <span id="logoFileName">Nenhum arquivo</span>
                            </div>
                        </div>
                        <div class="alert-blue">
                            ‚ÑπÔ∏è <b>B√¥nus de Velocidade:</b> Distribua seu token em at√© 2h para ganhar status verificado.
                        </div>
                        <button class="btn-primary full" onclick="createToken()">Criar Contrato</button>
                    </div>
                </div>

                <div id="bridge" class="page-section">
                    <div class="card">
                        <div class="card-header">
                            <h3>Circle CCTP Bridge</h3>
                            <div class="toggle-switch">
                                <button class="toggle-btn active" onclick="setBridgeMode('deposit')">Enviar</button>
                                <button class="toggle-btn" onclick="setBridgeMode('claim')">Receber</button>
                            </div>
                        </div>
                        
                        <div id="bridgeDepositArea">
                            <div class="input-group">
                                <label>Quantidade (USDC)</label>
                                <input type="number" id="bridgeAmount" placeholder="0.00">
                            </div>
                            <div class="action-grid">
                                <button class="btn-secondary" onclick="approveUSDC()">1. Aprovar</button>
                                <button class="btn-primary" onclick="burnUSDC()">2. Transferir</button>
                            </div>
                        </div>

                        <div id="bridgeClaimArea" style="display:none;">
                            <div class="input-group">
                                <label>Message Bytes</label>
                                <textarea id="cctpMessageBytes" rows="3"></textarea>
                            </div>
                            <div class="input-group">
                                <label>Attestation Signature</label>
                                <textarea id="cctpAttestation" rows="3"></textarea>
                            </div>
                            <button class="btn-primary full" onclick="mintUSDC()">Finalizar Transfer√™ncia</button>
                        </div>
                    </div>
                </div>

                <div id="multisender" class="page-section">
                    <div class="card">
                        <h3>Multisender</h3>
                        <div class="input-group">
                            <label>Token Address</label>
                            <input type="text" id="multiTokenAddr" placeholder="0x...">
                        </div>
                        <div class="input-group">
                            <div class="flex-between">
                                <label>Destinat√°rios (CSV)</label>
                                <button class="text-btn" onclick="document.getElementById('csvFile').click()">Importar Arquivo</button>
                                <input type="file" id="csvFile" hidden onchange="handleFileUpload(this)">
                            </div>
                            <textarea id="csvInput" rows="5" placeholder="0xAddress, Amount"></textarea>
                        </div>
                        <div class="action-grid">
                            <button class="btn-secondary" onclick="approveToken('multi')">Aprovar</button>
                            <button class="btn-primary" onclick="sendBatch()">Enviar Lote</button>
                        </div>
                    </div>
                </div>

                <div id="locker" class="page-section">
                    <div class="card">
                        <h3>Liquidity Locker</h3>
                        <div class="input-group"><label>Token</label><input type="text" id="lockTokenAddr"></div>
                        <div class="form-row">
                            <div class="input-group"><label>Quantidade</label><input type="number" id="lockAmount"></div>
                            <div class="input-group"><label>Data Desbloqueio</label><input type="datetime-local" id="lockDate"></div>
                        </div>
                        <div class="action-grid">
                            <button class="btn-secondary" onclick="approveToken('lock')">Aprovar</button>
                            <button class="btn-primary" onclick="lockTokens()">Trancar</button>
                        </div>
                    </div>
                </div>

                <div id="vesting" class="page-section">
                    <div class="card">
                        <h3>Vesting Schedule</h3>
                        <div class="input-group"><label>Token</label><input type="text" id="vestTokenAddr"></div>
                        <div class="input-group"><label>Benefici√°rio</label><input type="text" id="vestBeneficiary"></div>
                        <div class="form-row">
                            <div class="input-group"><label>Total</label><input type="number" id="vestAmount"></div>
                            <div class="input-group"><label>Dura√ß√£o (Min)</label><input type="number" id="vestDuration"></div>
                        </div>
                        <div class="action-grid">
                            <button class="btn-secondary" onclick="approveToken('vest')">Aprovar</button>
                            <button class="btn-primary" onclick="createVesting()">Criar</button>
                        </div>
                    </div>
                    <div class="card mt-4">
                        <h3>Meus Saques</h3>
                        <div id="dashboardContent" class="empty-state">Sem vestings ativos.</div>
                        <button class="btn-secondary full mt-2" onclick="loadDashboardData()">Atualizar</button>
                    </div>
                </div>

                <div id="leaderboard" class="page-section">
                    
                    <div class="hub-grid">
                        <div class="hub-sidebar">
                            <div class="card profile-card">
                                <div class="profile-header">
                                    <div class="avatar-ring">
                                        <img id="userAvatarDisplay" src="https://robohash.org/default?set=set4">
                                        <button class="edit-btn" onclick="document.getElementById('profileAvatarInput').click()">+</button>
                                        <input type="file" id="profileAvatarInput" hidden onchange="handleAvatarUpload(this)">
                                    </div>
                                </div>
                                <div class="profile-body">
                                    <h2 id="userDisplayName">Anonymous</h2>
                                    <span class="badge-gray" id="userWalletDisplay">0x...</span>
                                    <p id="userBioDisplay">Sem bio.</p>
                                    <button class="text-btn small" onclick="document.getElementById('editProfileDialog').showModal()">Editar Perfil</button>
                                    
                                    <div class="xp-container">
                                        <span class="xp-label">Reputa√ß√£o (XP)</span>
                                        <div class="xp-value" id="statXP">0</div>
                                    </div>
                                    <button id="btnDailyCheckin" class="btn-primary full small" onclick="dailyCheckIn()">Claim Di√°rio</button>
                                </div>
                            </div>

                            <div class="card mt-4">
                                <h3>Aliados</h3>
                                <div id="contactsList" class="contacts-list"></div>
                                <button class="btn-secondary full small mt-2" onclick="toggleAddContactForm()">+ Novo Contato</button>
                                <div id="addContactForm" style="display:none; margin-top:10px;">
                                    <input type="text" id="newContactName" placeholder="Nome" class="mb-2">
                                    <input type="text" id="newContactWallet" placeholder="Address" class="mb-2">
                                    <button class="btn-primary full small" onclick="saveContact()">Salvar</button>
                                </div>
                            </div>
                        </div>

                        <div class="hub-content">
                            <div class="hub-tabs">
                                <button class="hub-tab active" onclick="showSubTab('global')">Global Explorer</button>
                                <button class="hub-tab" onclick="showSubTab('my')">Meus Projetos</button>
                                <button class="hub-tab" onclick="showSubTab('portfolio')">Portfolio</button>
                            </div>

                            <div id="subTabGlobal" class="tab-content">
                                <div id="globalTokensList" class="token-grid"></div>
                            </div>
                            <div id="subTabMy" class="tab-content" style="display:none;">
                                <div id="myTokensList" class="token-grid"></div>
                            </div>
                            <div id="subTabPortfolio" class="tab-content" style="display:none;">
                                <div class="alert-blue mb-4">Seus saldos na rede Arc.</div>
                                <div id="portfolioList" class="token-grid"></div>
                                <button class="btn-secondary full mt-2" onclick="loadMyPortfolio()">Atualizar Saldos</button>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </main>
    </div>

    <dialog id="editProfileDialog" class="modal-dialog">
        <h3>Editar Perfil</h3>
        <input type="text" id="editName" placeholder="Nome">
        <input type="text" id="editBio" placeholder="Bio">
        <div class="modal-actions">
            <button class="btn-secondary" onclick="document.getElementById('editProfileDialog').close()">Cancelar</button>
            <button class="btn-primary" onclick="saveProfileData(); document.getElementById('editProfileDialog').close()">Salvar</button>
        </div>
    </dialog>

    <div id="successModal" class="modal-overlay" style="display:none;">
        <div class="card success-card">
            <div class="success-icon">‚úì</div>
            <h2 id="modalTitle">Sucesso</h2>
            <p id="modalMsg">Opera√ß√£o conclu√≠da.</p>
            <div id="tokenCreatedInfo" style="display:none;" class="code-block">
                <code id="newContractAddr">0x...</code>
            </div>
            <button class="btn-primary full mt-4" onclick="document.getElementById('successModal').style.display='none'">Fechar</button>
        </div>
    </div>
    
    <script src="js/config.js"></script>
    <script src="js/ui.js"></script>
    <script src="js/social.js"></script>
    <script src="js/web3.js"></script>
    <script>
        function showSubTab(name) {
            document.querySelectorAll('.tab-content').forEach(el => el.style.display = 'none');
            document.querySelectorAll('.hub-tab').forEach(el => el.classList.remove('active'));
            document.getElementById('subTab' + name.charAt(0).toUpperCase() + name.slice(1)).style.display = 'block';
            event.target.classList.add('active');
            if(name === 'portfolio') loadMyPortfolio();
        }
    </script>
</body>
</html>
